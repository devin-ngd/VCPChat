/*
 * styles/themes/themes诛仙-青衣问剑.css * Curated by Coco
 * ZHU XIAN Theme: Qing Yi Wen Jian (青衣问剑)
 * A serene, elegant, and focused theme inspired by the world of ZHU XIAN.
 */

/* * =================================================================
 * Dark Theme (Default): Qing Yi Wen Jian (青衣问剑)
 * Inspired by the misty mountains and quiet contemplation of a cultivator.
 * A sharp, clear, and professional theme.
 * =================================================================
 */
:root {
  /* --- Wallpaper Interface --- */
  /*
   * For the frosted glass effect on chat bubbles to be prominent,
   */
  --chat-wallpaper-dark: url("../assets/wallpaper/zhuxian.webp"); /* 默认使用webp壁纸 */

  /* --- Base Colors --- */
  --primary-bg: #1f2d35; /* 主背景 - 深青灰 */
  --secondary-bg: #293b45; /* 侧边栏/面板背景 - 略浅的青灰 */
  --tertiary-bg: #182529; /* 聊天区背景 - 更深的青黑 */
  --accent-bg: #384a54; /* 悬停/选中背景 - 中青灰 */
  --border-color: #384a54; /* 边框颜色 */
  --input-bg: #2a3b44; /* 输入框背景 */

  --panel-bg-dark: rgba(
    41,
    59,
    69,
    0.75
  ); /* 基于--secondary-bg，增加75%不透明度 */

  /* --- Text Colors --- */
  --primary-text: #f0f0f0; /* 主要文字 - 非常浅的灰 (为了高对比度) */
  --secondary-text: #b0b0b0; /* 次要/标题文字 - 中浅灰 */
  --highlight-text: #a2d5f2; /* 高亮文字 - 柔和冰蓝 (点缀色) */
  --text-on-accent: #1f2d35; /* 在强调色背景上的文字 - 使用深色背景形成对比 */
  --placeholder-text: #6a8090; /* 输入框占位文字 */
  --quoted-text: #a2d5f2; /* 引用文本颜色 - 柔和冰蓝 */
  --user-text: #f0f0f0; /* 用户气泡文字 - 与 primary-text 相同 */
  --agent-text: #f0f0f0; /* Agent气泡文字 - 与 primary-text 相同 */

  /* --- Bubble Colors (Frosted Glass Ready) --- */
  --user-bubble-bg: rgba(
    56,
    120,
    173,
    0.45
  ); /* 用户气泡 - 柔和冰蓝 (点缀色) - 增强不透明度 */
  --assistant-bubble-bg: rgba(
    47,
    47,
    51,
    0.6
  ); /* AI气泡 - 深青灰 - 增强不透明度 */

  /* --- UI Element Colors --- */
  --button-bg: #384a54; /* 按钮背景 - 中青灰 */
  --button-hover-bg: #485a64; /* 按钮悬停 - 略亮的青灰 */
  --danger-color: #e57373; /* 危险操作 - 柔和红 */
  --danger-hover-bg: #ef5350;
  --success-color: #66bb6a; /* 成功操作 - 柔和绿 */
  --notification-bg: #293b45;
  --notification-header-bg: #2f414b;
  --notification-border: #485a64;
  --tool-bubble-bg: rgba(
    74,
    107,
    122,
    0.2
  ); /* VCP工具调用气泡背景 - 半透明中青灰 */
  --tool-bubble-border: #a2d5f2; /* VCP工具调用气泡边框 - 柔和冰蓝 */

  /* --- Scrollbar --- */
  --scrollbar-track: rgba(41, 59, 69, 0.5);
  --scrollbar-thumb: rgba(162, 213, 242, 0.4);
  --scrollbar-thumb-hover: rgba(162, 213, 242, 0.6);

  /* --- Shimmer Effect for Loading --- */
  /* --- 流式输出动画部分，分别定义了光影闪烁时最低透明度的transparent色和高光动画色highlignt色 --- */
  --shimmer-color-transparent: rgba(240, 240, 240, 0.1);
  --shimmer-color-highlight: rgba(240, 240, 240, 0.3);

  /* --- Text Shadow for Frosted Panels --- */
  --panel-text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);

  /* --- Unified Panel Background --- */
  --panel-bg: var(--panel-bg-dark);
}

body {
  background-image: var(--chat-wallpaper-dark);
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
}

/* * =================================================================
 * Light Theme: Qing Yi Wen Jian (青衣问剑)
 * A lighter, yet still elegant and focused take on the ZHU XIAN theme.
 * =================================================================
 */
body.light-theme {
  /* Wallpaper and background properties */
  background-image: var(--chat-wallpaper-light);
  background-size: cover;
  background-position: center;
  background-attachment: fixed;
  /* --- Wallpaper Interface --- */
  --chat-wallpaper-light: url("../assets/wallpaper/zhuxian.jpg"); /* 浅色主题使用jpg壁纸 */

  /* --- Base Colors --- */
  --primary-bg: #e9edf0; /* 主背景 - 非常浅的灰蓝色 */
  --secondary-bg: #ffffff; /* 侧边栏 - 白色 */
  --tertiary-bg: #dde3e7; /* 聊天区 - 浅灰 */
  --accent-bg: #d0d8de; /* 悬停/选中背景 */
  --border-color: #d0d8de; /* 边框 - 调整为更浅的颜色 */
  --input-bg: #ffffff; /* 输入框 */

  --panel-bg-light: rgba(
    255,
    255,
    255,
    0.8
  ); /* 基于--secondary-bg，增加80%不透明度 */

  /* --- Text Colors --- */
  --primary-text: #2c3e50; /* 主要文字 - 深灰蓝 */
  --secondary-text: #5a6f80; /* 次要/标题文字 - 中灰蓝 */
  --highlight-text: #4a90a4; /* 高亮文字 - 清爽蓝 */
  --text-on-accent: #ffffff; /* 强调背景文字 */
  --placeholder-text: #a0aab3; /* 占位文字 */
  --quoted-text: #4a90a4; /* 引用文字 - 蓝色 */
  --user-text: #2c3e50; /* 用户气泡文字 - 深灰蓝 (与 primary-text 相同) */
  --agent-text: #2c3e50; /* Agent气泡文字 - 深灰蓝 */

  /* --- Bubble Colors --- */
  --user-bubble-bg: rgba(56, 120, 173, 0.45); /* 用户气泡 - 清爽蓝 - 半透明 */
  --assistant-bubble-bg: rgba(
    47,
    47,
    51,
    0.6
  ); /* AI气泡 - 非常浅的蓝 - 半透明 */

  /* --- UI Element Colors --- */
  --button-bg: #4a90a4; /* 按钮 - 清爽蓝 */
  --button-hover-bg: #3a8094; /* 按钮悬停 - 深一点的蓝 */
  --danger-color: #e74c3c; /* 危险色 - 红色 */
  --danger-hover-bg: #c0392b;
  --success-color: #4caf50; /* 成功色 - 绿色 */
  --notification-bg: #e8f4f8;
  --notification-header-bg: #f0f0f0;
  --notification-border: #4a90a4;
  --tool-bubble-bg: rgba(
    208,
    216,
    222,
    0.5
  ); /* VCP工具调用气泡背景 - 半透明浅灰 */
  --tool-bubble-border: #4a90a4; /* VCP工具调用气泡边框 - 清爽蓝 */

  /* --- Scrollbar --- */
  --scrollbar-track: rgba(200, 200, 200, 0.7);
  --scrollbar-thumb: rgba(150, 150, 150, 0.8);
  --scrollbar-thumb-hover: rgba(120, 120, 120, 0.6);

  /* --- Shimmer Effect --- */

  --shimmer-color-transparent: rgba(44, 62, 80, 0.04);
  --shimmer-color-highlight: rgba(44, 62, 80, 0.08);

  /* --- Unified Panel Background --- */
  --panel-bg: var(--panel-bg-light);
}

/* * =================================================================
 * Enhanced Frosted Glass Effect
 * 增强磨砂玻璃效果 - 小灵特制
 * =================================================================
 */

/* 为聊天气泡添加更强的磨砂玻璃效果 */
.message-bubble {
  backdrop-filter: blur(12px) saturate(120%);
  -webkit-backdrop-filter: blur(12px) saturate(120%);
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 悬停时的微妙发光效果 */
.message-bubble:hover {
  backdrop-filter: blur(16px) saturate(130%);
  -webkit-backdrop-filter: blur(16px) saturate(130%);
  transform: translateY(-1px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

/* 为工具调用气泡添加特殊效果 */
.tool-bubble {
  backdrop-filter: blur(10px) saturate(110%);
  -webkit-backdrop-filter: blur(10px) saturate(110%);
  border: 1px solid var(--tool-bubble-border);
  background: var(--tool-bubble-bg);
}

/* 深色主题下的特殊光效 */
:root .message-bubble {
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* 浅色主题下的柔和阴影 */
body.light-theme .message-bubble {
  box-shadow: 0 4px 20px rgba(45, 41, 34, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.7);
}
